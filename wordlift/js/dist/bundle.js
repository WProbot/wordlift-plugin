/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/Public/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcz8yM2M2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/defineProperty.js\n");

/***/ }),

/***/ "./src/Public/analytics.js":
/*!*********************************!*\
  !*** ./src/Public/analytics.js ***!
  \*********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\n\n/**\n * A collection of functions and logic to handle sending of entity data to an\n * external analytics tracker.\n *\n * Objects: `ga`, `__gaTracker` are supported as is `gtag`.\n *\n * NOTE: the `__gaTracker` object is a common remap name in WordPress.\n */\n(function () {\n  // Only run after page has loaded.\n  document.addEventListener(\"DOMContentLoaded\", function (event) {\n    // We should have an entity object by here but if not short circuit.\n    if (typeof wordliftAnalyticsEntityData === \"undefined\") {\n      return;\n    }\n    /**\n     * Promise to handle detection and return of an analytics object.\n     *\n     * @type {Promise}\n     */\n\n\n    var detectAnalyticsObject = new Promise(function (resolve, reject) {\n      var analyticsObj = getAnalyticsObject();\n      return resolve(analyticsObj);\n    });\n    /**\n     * A function returning the promise that deals with creating items\n     * to send and passing them to the correct send function.\n     *\n     * @method\n     * @param  {object} analyticsObj an analytics tracking object that is the resolve of the detect function.\n     * @return {Promise}\n     */\n\n    var sendAnalyticsData = function sendAnalyticsData(analyticsObj) {\n      return new Promise(function (resolve, reject) {\n        // if we dont have an object to push into and an object\n        // with config then this is a failure - reject.\n        if (\"undefined\" === typeof analyticsObj || \"undefined\" === typeof wordliftAnalyticsConfigData) {\n          return reject();\n        } // setup the custom dimention names.\n\n\n        var dimX = \"dimension\" + wordliftAnalyticsConfigData.entity_uri_dimension;\n        var dimY = \"dimension\" + wordliftAnalyticsConfigData.entity_type_dimension; // Create an array of all the individual entities.\n\n        var entities = [];\n\n        for (var key in wordliftAnalyticsEntityData) {\n          if (wordliftAnalyticsEntityData.hasOwnProperty(key)) {\n            entities.push(wordliftAnalyticsEntityData[key]);\n          }\n        } // Count the total entities we have to send.\n\n\n        var entitiesTotal = entities.length; // console.log( `Going to send analytics events using ${analyticsObj.__wl_type} object type.` );\n\n        /**\n         * Depending on the tracking object type send the data\n         * to the correspending service.\n         */\n\n        if (\"ga\" === analyticsObj.__wl_type) {\n          // This is `ga` style object.\n          for (var i = 0; i < entitiesTotal; i++) {\n            sendGaEvent(analyticsObj, dimX, dimY, entities[i].label, entities[i].uri, entities[i].type);\n          }\n        } else if (\"gtag\" === analyticsObj.__wl_type) {\n          // This is `gtag` style object.\n          for (var i = 0; i < entitiesTotal; i++) {\n            sendGtagEvent(analyticsObj, dimX, dimY, entities[i].label, entities[i].uri, entities[i].type);\n          }\n        } else if (\"gtm\" === analyticsObj.__wl_type) {\n          // This is `gtag` style object.\n          for (var i = 0; i < entitiesTotal; i++) {\n            sendGtmEvent(analyticsObj, dimX, dimY, entities[i].label, entities[i].uri, entities[i].type);\n          }\n        } // @TODO handle failure.\n        // resolve to finish.\n\n\n        return resolve(true);\n      });\n    }; // Fire off the promise chain to detect and send analytics data.\n\n\n    detectAnalyticsObject.then(function (analyticsObj) {\n      return sendAnalyticsData(analyticsObj);\n    });\n  });\n  /**\n   * Detects and returns a supported analytics object if one exists.\n   *\n   * @method getAnalyticsObject\n   * @return {object|bool}\n   */\n\n  function getAnalyticsObject() {\n    var obj = false; // detect GTAG, GTM, GA in that order.\n\n    if (window.gtag) {\n      obj = window.gtag;\n      obj.__wl_type = \"gtag\";\n    } else if (window.dataLayer) {\n      obj = window.dataLayer;\n      obj.__wl_type = \"gtm\";\n    } else if (window.ga) {\n      obj = window.ga;\n      obj.__wl_type = \"ga\";\n    } else if (window.__gaTracker) {\n      obj = window.__gaTracker;\n      obj.__wl_type = \"ga\";\n    } // console.log( `Found a ${obj.__wl_type} analytics object.` );\n\n\n    return obj;\n  }\n  /**\n   * Wrapper function for pushing entity analytics data to ga style tracker.\n   *\n   * @method sendGaEvent\n   * @param  {ga} analyticsObject The anlytics object we push into.\n   * @param  {string} dimX the name of the first custom dimension.\n   * @param  {string} dimY the name of the second custom dimension.\n   * @param  {string} label a string to use as the label.\n   * @param  {string} uri the uri of this entity.\n   * @param  {string} type the entity type.\n   */\n\n\n  function sendGaEvent(analyticsObj, dimX, dimY, label, uri, type) {\n    var _analyticsObj;\n\n    // Double check we have the config object before continuing.\n    if (\"undefined\" === typeof wordliftAnalyticsConfigData) {\n      return false;\n    }\n\n    analyticsObj(\"send\", \"event\", \"WordLift\", \"Mentions\", label, 1, (_analyticsObj = {}, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_analyticsObj, dimX, uri), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_analyticsObj, dimY, type), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_analyticsObj, \"nonInteraction\", true), _analyticsObj));\n  }\n  /**\n   * Wrapper function for pushing entity analytics data to gtag.\n   *\n   * @method sendGtagEvent\n   * @param  {gtag} analyticsObject The anlytics object we push into.\n   * @param  {string} dimX the name of the first custom dimension.\n   * @param  {string} dimY the name of the second custom dimension.\n   * @param  {string} label a string to use as the label.\n   * @param  {string} uri the uri of this entity.\n   * @param  {string} type the entity type.\n   */\n\n\n  function sendGtagEvent(analyticsObj, dimX, dimY, label, uri, type) {\n    var _analyticsObj2;\n\n    // Double check we have the config object before continuing.\n    if (\"undefined\" === typeof wordliftAnalyticsConfigData) {\n      return false;\n    } // console.log(\"Sending gtag event ...\");\n\n\n    analyticsObj(\"event\", \"Mentions\", (_analyticsObj2 = {\n      event_category: \"WordLift\",\n      event_label: label,\n      value: 1\n    }, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_analyticsObj2, dimX, uri), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_analyticsObj2, dimY, type), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_analyticsObj2, \"non_interaction\", true), _analyticsObj2));\n  }\n  /**\n   * Wrapper function for pushing entity analytics data to gtag.\n   *\n   * @method sendGtagEvent\n   * @param  {gtag} analyticsObject The anlytics object we push into.\n   * @param  {string} dimX the name of the first custom dimension.\n   * @param  {string} dimY the name of the second custom dimension.\n   * @param  {string} label a string to use as the label.\n   * @param  {string} uri the uri of this entity.\n   * @param  {string} type the entity type.\n   */\n\n\n  function sendGtmEvent(analyticsObj, dimX, dimY, label, uri, type) {\n    // Double check we have the config object before continuing.\n    if (\"undefined\" === typeof wordliftAnalyticsConfigData) {\n      return false;\n    } // console.log(\"Sending gtm event...\");\n\n\n    analyticsObj.push({\n      \"event\": \"Mentions\",\n      \"wl_event_action\": \"Mentions\",\n      \"wl_event_category\": \"WordLift\",\n      \"wl_event_label\": label,\n      \"wl_event_value\": 1,\n      \"wl_event_uri\": uri,\n      \"wl_index_uri\": dimX.replace(/^\\D+/g, ''),\n      \"wl_event_type\": type,\n      \"wl_index_type\": dimY.replace(/^\\D+/g, ''),\n      \"non_interaction\": true\n    });\n  }\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUHVibGljL2FuYWx5dGljcy5qcz85NWZiIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwid29yZGxpZnRBbmFseXRpY3NFbnRpdHlEYXRhIiwiZGV0ZWN0QW5hbHl0aWNzT2JqZWN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhbmFseXRpY3NPYmoiLCJnZXRBbmFseXRpY3NPYmplY3QiLCJzZW5kQW5hbHl0aWNzRGF0YSIsIndvcmRsaWZ0QW5hbHl0aWNzQ29uZmlnRGF0YSIsImRpbVgiLCJlbnRpdHlfdXJpX2RpbWVuc2lvbiIsImRpbVkiLCJlbnRpdHlfdHlwZV9kaW1lbnNpb24iLCJlbnRpdGllcyIsImtleSIsImhhc093blByb3BlcnR5IiwicHVzaCIsImVudGl0aWVzVG90YWwiLCJsZW5ndGgiLCJfX3dsX3R5cGUiLCJpIiwic2VuZEdhRXZlbnQiLCJsYWJlbCIsInVyaSIsInR5cGUiLCJzZW5kR3RhZ0V2ZW50Iiwic2VuZEd0bUV2ZW50IiwidGhlbiIsIm9iaiIsIndpbmRvdyIsImd0YWciLCJkYXRhTGF5ZXIiLCJnYSIsIl9fZ2FUcmFja2VyIiwiZXZlbnRfY2F0ZWdvcnkiLCJldmVudF9sYWJlbCIsInZhbHVlIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7Ozs7QUFTQSxDQUFDLFlBQVc7QUFDVjtBQUNBQSxVQUFRLENBQUNDLGdCQUFULENBQTBCLGtCQUExQixFQUE4QyxVQUFTQyxLQUFULEVBQWdCO0FBQzVEO0FBQ0EsUUFBSSxPQUFPQywyQkFBUCxLQUF1QyxXQUEzQyxFQUF3RDtBQUN0RDtBQUNEO0FBRUQ7Ozs7Ozs7QUFLQSxRQUFJQyxxQkFBcUIsR0FBRyxJQUFJQyxPQUFKLENBQVksVUFBU0MsT0FBVCxFQUFrQkMsTUFBbEIsRUFBMEI7QUFDaEUsVUFBSUMsWUFBWSxHQUFHQyxrQkFBa0IsRUFBckM7QUFDQSxhQUFPSCxPQUFP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dCI6WyIvKipcbiAqIEEgY29sbGVjdGlvbiBvZiBmdW5jdGlvbnMgYW5kIGxvZ2ljIHRvIGhhbmRsZSBzZW5kaW5nIG9mIGVudGl0eSBkYXRhIHRvIGFuXG4gKiBleHRlcm5hbCBhbmFseXRpY3MgdHJhY2tlci5cbiAqXG4gKiBPYmplY3RzOiBgZ2FgLCBgX19nYVRyYWNrZXJgIGFyZSBzdXBwb3J0ZWQgYXMgaXMgYGd0YWdgLlxuICpcbiAqIE5PVEU6IHRoZSBgX19nYVRyYWNrZXJgIG9iamVjdCBpcyBhIGNvbW1vbiByZW1hcCBuYW1lIGluIFdvcmRQcmVzcy5cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIC8vIE9ubHkgcnVuIGFmdGVyIHBhZ2UgaGFzIGxvYWRlZC5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyBXZSBzaG91bGQgaGF2ZSBhbiBlbnRpdHkgb2JqZWN0IGJ5IGhlcmUgYnV0IGlmIG5vdCBzaG9ydCBjaXJjdWl0LlxuICAgIGlmICh0eXBlb2Ygd29yZGxpZnRBbmFseXRpY3NFbnRpdHlEYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvbWlzZSB0byBoYW5kbGUgZGV0ZWN0aW9uIGFuZCByZXR1cm4gb2YgYW4gYW5hbHl0aWNzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtQcm9taXNlfVxuICAgICAqL1xuICAgIHZhciBkZXRlY3RBbmFseXRpY3NPYmplY3QgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBhbmFseXRpY3NPYmogPSBnZXRBbmFseXRpY3NPYmplY3QoKTtcbiAgICAgIHJldHVybiByZXNvbHZlKGFuYWx5dGljc09iaik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHJldHVybmluZyB0aGUgcHJvbWlzZSB0aGF0IGRlYWxzIHdpdGggY3JlYXRpbmcgaXRlbXNcbiAgICAgKiB0byBzZW5kIGFuZCBwYXNzaW5nIHRoZW0gdG8gdGhlIGNvcnJlY3Qgc2VuZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGFuYWx5dGljc09iaiBhbiBhbmFseXRpY3MgdHJhY2tpbmcgb2JqZWN0IHRoYXQgaXMgdGhlIHJlc29sdmUgb2YgdGhlIGRldGVjdCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAqL1xuICAgIHZhciBzZW5kQW5hbHl0aWNzRGF0YSA9IGZ1bmN0aW9uKGFuYWx5dGljc09iaikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBpZiB3ZSBkb250IGhhdmUgYW4gb2JqZWN0IHRvIHB1c2ggaW50byBhbmQgYW4gb2JqZWN0XG4gICAgICAgIC8vIHdpdGggY29uZmlnIHRoZW4gdGhpcyBpcyBhIGZhaWx1cmUgLSByZWplY3QuXG4gICAgICAgIGlmIChcInVuZGVmaW5lZFwiID09PSB0eXBlb2YgYW5hbHl0aWNzT2JqIHx8IFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiB3b3JkbGlmdEFuYWx5dGljc0NvbmZpZ0RhdGEpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXR1cCB0aGUgY3VzdG9tIGRpbWVudGlvbiBuYW1lcy5cbiAgICAgICAgdmFyIGRpbVggPSBcImRpbWVuc2lvblwiICsgd29yZGxpZnRBbmFseXRpY3NDb25maWdEYXRhLmVudGl0eV91cmlfZGltZW5zaW9uO1xuICAgICAgICB2YXIgZGltWSA9IFwiZGltZW5zaW9uXCIgKyB3b3JkbGlmdEFuYWx5dGljc0NvbmZpZ0RhdGEuZW50aXR5X3R5cGVfZGltZW5zaW9uO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBhbGwgdGhlIGluZGl2aWR1YWwgZW50aXRpZXMuXG4gICAgICAgIHZhciBlbnRpdGllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gd29yZGxpZnRBbmFseXRpY3NFbnRpdHlEYXRhKSB7XG4gICAgICAgICAgaWYgKHdvcmRsaWZ0QW5hbHl0aWNzRW50aXR5RGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBlbnRpdGllcy5wdXNoKHdvcmRsaWZ0QW5hbHl0aWNzRW50aXR5RGF0YVtrZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb3VudCB0aGUgdG90YWwgZW50aXRpZXMgd2UgaGF2ZSB0byBzZW5kLlxuICAgICAgICB2YXIgZW50aXRpZXNUb3RhbCA9IGVudGl0aWVzLmxlbmd0aDtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyggYEdvaW5nIHRvIHNlbmQgYW5hbHl0aWNzIGV2ZW50cyB1c2luZyAke2FuYWx5dGljc09iai5fX3dsX3R5cGV9IG9iamVjdCB0eXBlLmAgKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVwZW5kaW5nIG9uIHRoZSB0cmFja2luZyBvYmplY3QgdHlwZSBzZW5kIHRoZSBkYXRhXG4gICAgICAgICAqIHRvIHRoZSBjb3JyZXNwZW5kaW5nIHNlcnZpY2UuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoXCJnYVwiID09PSBhbmFseXRpY3NPYmouX193bF90eXBlKSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyBgZ2FgIHN0eWxlIG9iamVjdC5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudGl0aWVzVG90YWw7IGkrKykge1xuICAgICAgICAgICAgc2VuZEdhRXZlbnQoYW5hbHl0aWNzT2JqLCBkaW1YLCBkaW1ZLCBlbnRpdGllc1tpXS5sYWJlbCwgZW50aXRpZXNbaV0udXJpLCBlbnRpdGllc1tpXS50eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXCJndGFnXCIgPT09IGFuYWx5dGljc09iai5fX3dsX3R5cGUpIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIGBndGFnYCBzdHlsZSBvYmplY3QuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRpdGllc1RvdGFsOyBpKyspIHtcbiAgICAgICAgICAgIHNlbmRHdGFnRXZlbnQoYW5hbHl0aWNzT2JqLCBkaW1YLCBkaW1ZLCBlbnRpdGllc1tpXS5sYWJlbCwgZW50aXRpZXNbaV0udXJpLCBlbnRpdGllc1tpXS50eXBlKTtcbiAgICAgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKFwiZ3RtXCIgPT09IGFuYWx5dGljc09iai5fX3dsX3R5cGUpIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIGBndGFnYCBzdHlsZSBvYmplY3QuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRpdGllc1RvdGFsOyBpKyspIHtcbiAgICAgICAgICAgIHNlbmRHdG1FdmVudChhbmFseXRpY3NPYmosIGRpbVgsIGRpbVksIGVudGl0aWVzW2ldLmxhYmVsLCBlbnRpdGllc1tpXS51cmksIGVudGl0aWVzW2ldLnR5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBAVE9ETyBoYW5kbGUgZmFpbHVyZS5cbiAgICAgICAgLy8gcmVzb2x2ZSB0byBmaW5pc2guXG4gICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEZpcmUgb2ZmIHRoZSBwcm9taXNlIGNoYWluIHRvIGRldGVjdCBhbmQgc2VuZCBhbmFseXRpY3MgZGF0YS5cbiAgICBkZXRlY3RBbmFseXRpY3NPYmplY3QudGhlbihhbmFseXRpY3NPYmogPT4gc2VuZEFuYWx5dGljc0RhdGEoYW5hbHl0aWNzT2JqKSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBEZXRlY3RzIGFuZCByZXR1cm5zIGEgc3VwcG9ydGVkIGFuYWx5dGljcyBvYmplY3QgaWYgb25lIGV4aXN0cy5cbiAgICpcbiAgICogQG1ldGhvZCBnZXRBbmFseXRpY3NPYmplY3RcbiAgICogQHJldHVybiB7b2JqZWN0fGJvb2x9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRBbmFseXRpY3NPYmplY3QoKSB7XG4gICAgdmFyIG9iaiA9IGZhbHNlO1xuICAgIC8vIGRldGVjdCBHVEFHLCBHVE0sIEdBIGluIHRoYXQgb3JkZXIuXG5cdGlmICh3aW5kb3cuZ3RhZykge1xuICAgICAgb2JqID0gd2luZG93Lmd0YWc7XG4gICAgICBvYmouX193bF90eXBlID0gXCJndGFnXCI7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cuZGF0YUxheWVyKSB7XG4gICAgICBvYmogPSB3aW5kb3cuZGF0YUxheWVyO1xuICAgICAgb2JqLl9fd2xfdHlwZSA9IFwiZ3RtXCI7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cuZ2EpIHtcbiAgICAgIG9iaiA9IHdpbmRvdy5nYTtcbiAgICAgIG9iai5fX3dsX3R5cGUgPSBcImdhXCI7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cuX19nYVRyYWNrZXIpIHtcbiAgICAgIG9iaiA9IHdpbmRvdy5fX2dhVHJhY2tlcjtcbiAgICAgIG9iai5fX3dsX3R5cGUgPSBcImdhXCI7XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2coIGBGb3VuZCBhICR7b2JqLl9fd2xfdHlwZX0gYW5hbHl0aWNzIG9iamVjdC5gICk7XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXBwZXIgZnVuY3Rpb24gZm9yIHB1c2hpbmcgZW50aXR5IGFuYWx5dGljcyBkYXRhIHRvIGdhIHN0eWxlIHRyYWNrZXIuXG4gICAqXG4gICAqIEBtZXRob2Qgc2VuZEdhRXZlbnRcbiAgICogQHBhcmFtICB7Z2F9IGFuYWx5dGljc09iamVjdCBUaGUgYW5seXRpY3Mgb2JqZWN0IHdlIHB1c2ggaW50by5cbiAgICogQHBhcmFtICB7c3RyaW5nfSBkaW1YIHRoZSBuYW1lIG9mIHRoZSBmaXJzdCBjdXN0b20gZGltZW5zaW9uLlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGRpbVkgdGhlIG5hbWUgb2YgdGhlIHNlY29uZCBjdXN0b20gZGltZW5zaW9uLlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGxhYmVsIGEgc3RyaW5nIHRvIHVzZSBhcyB0aGUgbGFiZWwuXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdXJpIHRoZSB1cmkgb2YgdGhpcyBlbnRpdHkuXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdHlwZSB0aGUgZW50aXR5IHR5cGUuXG4gICAqL1xuICBmdW5jdGlvbiBzZW5kR2FFdmVudChhbmFseXRpY3NPYmosIGRpbVgsIGRpbVksIGxhYmVsLCB1cmksIHR5cGUpIHtcbiAgICAvLyBEb3VibGUgY2hlY2sgd2UgaGF2ZSB0aGUgY29uZmlnIG9iamVjdCBiZWZvcmUgY29udGludWluZy5cbiAgICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIHdvcmRsaWZ0QW5hbHl0aWNzQ29uZmlnRGF0YSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhbmFseXRpY3NPYmooXCJzZW5kXCIsIFwiZXZlbnRcIiwgXCJXb3JkTGlmdFwiLCBcIk1lbnRpb25zXCIsIGxhYmVsLCAxLCB7XG4gICAgICBbZGltWF06IHVyaSxcbiAgICAgIFtkaW1ZXTogdHlwZSxcbiAgICAgIG5vbkludGVyYWN0aW9uOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcHBlciBmdW5jdGlvbiBmb3IgcHVzaGluZyBlbnRpdHkgYW5hbHl0aWNzIGRhdGEgdG8gZ3RhZy5cbiAgICpcbiAgICogQG1ldGhvZCBzZW5kR3RhZ0V2ZW50XG4gICAqIEBwYXJhbSAge2d0YWd9IGFuYWx5dGljc09iamVjdCBUaGUgYW5seXRpY3Mgb2JqZWN0IHdlIHB1c2ggaW50by5cbiAgICogQHBhcmFtICB7c3RyaW5nfSBkaW1YIHRoZSBuYW1lIG9mIHRoZSBmaXJzdCBjdXN0b20gZGltZW5zaW9uLlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGRpbVkgdGhlIG5hbWUgb2YgdGhlIHNlY29uZCBjdXN0b20gZGltZW5zaW9uLlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGxhYmVsIGEgc3RyaW5nIHRvIHVzZSBhcyB0aGUgbGFiZWwuXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdXJpIHRoZSB1cmkgb2YgdGhpcyBlbnRpdHkuXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdHlwZSB0aGUgZW50aXR5IHR5cGUuXG4gICAqL1xuICBmdW5jdGlvbiBzZW5kR3RhZ0V2ZW50KGFuYWx5dGljc09iaiwgZGltWCwgZGltWSwgbGFiZWwsIHVyaSwgdHlwZSkge1xuICAgIC8vIERvdWJsZSBjaGVjayB3ZSBoYXZlIHRoZSBjb25maWcgb2JqZWN0IGJlZm9yZSBjb250aW51aW5nLlxuICAgIGlmIChcInVuZGVmaW5lZFwiID09PSB0eXBlb2Ygd29yZGxpZnRBbmFseXRpY3NDb25maWdEYXRhKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2coXCJTZW5kaW5nIGd0YWcgZXZlbnQgLi4uXCIpO1xuXG4gICAgYW5hbHl0aWNzT2JqKFwiZXZlbnRcIiwgXCJNZW50aW9uc1wiLCB7XG4gICAgICBldmVudF9jYXRlZ29yeTogXCJXb3JkTGlmdFwiLFxuICAgICAgZXZlbnRfbGFiZWw6IGxhYmVsLFxuICAgICAgdmFsdWU6IDEsXG4gICAgICBbZGltWF06IHVyaSxcbiAgICAgIFtkaW1ZXTogdHlwZSxcbiAgICAgIG5vbl9pbnRlcmFjdGlvbjogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXBwZXIgZnVuY3Rpb24gZm9yIHB1c2hpbmcgZW50aXR5IGFuYWx5dGljcyBkYXRhIHRvIGd0YWcuXG4gICAqXG4gICAqIEBtZXRob2Qgc2VuZEd0YWdFdmVudFxuICAgKiBAcGFyYW0gIHtndGFnfSBhbmFseXRpY3NPYmplY3QgVGhlIGFubHl0aWNzIG9iamVjdCB3ZSBwdXNoIGludG8uXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZGltWCB0aGUgbmFtZSBvZiB0aGUgZmlyc3QgY3VzdG9tIGRpbWVuc2lvbi5cbiAgICogQHBhcmFtICB7c3RyaW5nfSBkaW1ZIHRoZSBuYW1lIG9mIHRoZSBzZWNvbmQgY3VzdG9tIGRpbWVuc2lvbi5cbiAgICogQHBhcmFtICB7c3RyaW5nfSBsYWJlbCBhIHN0cmluZyB0byB1c2UgYXMgdGhlIGxhYmVsLlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHVyaSB0aGUgdXJpIG9mIHRoaXMgZW50aXR5LlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGUgdGhlIGVudGl0eSB0eXBlLlxuICAgKi9cbiAgZnVuY3Rpb24gc2VuZEd0bUV2ZW50KGFuYWx5dGljc09iaiwgZGltWCwgZGltWSwgbGFiZWwsIHVyaSwgdHlwZSkge1xuICAgIC8vIERvdWJsZSBjaGVjayB3ZSBoYXZlIHRoZSBjb25maWcgb2JqZWN0IGJlZm9yZSBjb250aW51aW5nLlxuICAgIGlmIChcInVuZGVmaW5lZFwiID09PSB0eXBlb2Ygd29yZGxpZnRBbmFseXRpY3NDb25maWdEYXRhKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2coXCJTZW5kaW5nIGd0bSBldmVudC4uLlwiKTtcblxuICAgIGFuYWx5dGljc09iai5wdXNoKHtcbiAgICAgIFwiZXZlbnRcIjogICAgICAgICAgICAgXCJNZW50aW9uc1wiLFxuICAgICAgXCJ3bF9ldmVudF9hY3Rpb25cIjogICBcIk1lbnRpb25zXCIsXG4gICAgICBcIndsX2V2ZW50X2NhdGVnb3J5XCI6IFwiV29yZExpZnRcIixcbiAgICAgIFwid2xfZXZlbnRfbGFiZWxcIjogICAgbGFiZWwsXG4gICAgICBcIndsX2V2ZW50X3ZhbHVlXCI6ICAgIDEsXG4gICAgICBcIndsX2V2ZW50X3VyaVwiOiAgICAgIHVyaSxcblx0ICBcIndsX2luZGV4X3VyaVwiOiAgICAgIGRpbVgucmVwbGFjZSggL15cXEQrL2csICcnICksXG4gICAgICBcIndsX2V2ZW50X3R5cGVcIjogICAgIHR5cGUsXG5cdCAgXCJ3bF9pbmRleF90eXBlXCI6ICAgICBkaW1ZLnJlcGxhY2UoIC9eXFxEKy9nLCAnJyApLFxuXHQgIFwibm9uX2ludGVyYWN0aW9uXCI6ICAgdHJ1ZVxuICAgIH0pO1xuICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Public/analytics.js\n");

/***/ }),

/***/ "./src/Public/index.js":
/*!*****************************!*\
  !*** ./src/Public/index.js ***!
  \*****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./analytics */ \"./src/Public/analytics.js\");\n/**\n * Internal dependencies.\n */\n // Set a reference to the WordLift settings.\n\nvar settings = window.wlSettings;\n/**\n * Build the request URL, inclusive of the query string parameters.\n *\n * @since 3.19.1\n *\n * @param params {{apiUrl, postId, isHome}} The query parameters.\n * @returns {string} The request URl.\n */\n\nvar buildUrl = function buildUrl(params) {\n  // Join with `?` or `&`.\n  var joinChar = 0 <= params.apiUrl.indexOf(\"?\") ? \"&\" : \"?\"; // Build the URL\n\n  var url = params.apiUrl + joinChar + \"action=wl_jsonld\" + ( // Append the post id parameter.\n  \"undefined\" !== typeof params.postId ? \"&id=\" + params.postId : \"\") + ( // Append the homepage parameter.\n  \"undefined\" !== typeof params.isHome ? \"&homepage=true\" : \"\");\n  return url;\n};\n/**\n * Load the JSON-LD.\n *\n * @since 3.0.0\n */\n\n\nvar loadJsonLd = function loadJsonLd() {\n  // Bail out it the container doesn't now about fetch.\n  if (\"undefined\" === typeof fetch) return; // Check if the JSON-LD is disabled, i.e. if there's a `jsonld_enabled`\n  // setting explicitly defined with a value different from '1'.\n\n  if (\"undefined\" !== typeof settings[\"jsonld_enabled\"] && \"1\" !== settings[\"jsonld_enabled\"]) {\n    return;\n  } // Check that we have a post id or it's homepage, otherwise exit.\n\n\n  if (\"undefined\" === typeof settings.postId && \"undefined\" === typeof settings.isHome) {\n    return;\n  } // Get the request URL.\n\n\n  var url = buildUrl(settings); // Finally fetch the URL.\n  //\n  // DO NOT use here `new URL(...)` / `URL.searchParams`: Google SDTT doesn't understand them.\n\n  fetch(url).then(function (response) {\n    return response.text();\n  }).then(function (body) {\n    // Use `document.createElement`. See https://github.com/insideout10/wordlift-plugin/issues/810.\n    var script = document.createElement(\"script\");\n    script.type = \"application/ld+json\";\n    script.innerText = body;\n    document.head.appendChild(script);\n  });\n};\n\nloadJsonLd(); //\n// window.addEventListener(\"load\", loadJsonLd);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUHVibGljL2luZGV4LmpzPzgxYmEiXSwibmFtZXMiOlsic2V0dGluZ3MiLCJ3aW5kb3ciLCJ3bFNldHRpbmdzIiwiYnVpbGRVcmwiLCJwYXJhbXMiLCJqb2luQ2hhciIsImFwaVVybCIsImluZGV4T2YiLCJ1cmwiLCJwb3N0SWQiLCJpc0hvbWUiLCJsb2FkSnNvbkxkIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJ0ZXh0IiwiYm9keSIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJpbm5lclRleHQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTs7O0NBS0E7O0FBQ0EsSUFBTUEsUUFBUSxHQUFHQyxNQUFNLENBQUNDLFVBQXhCO0FBRUE7Ozs7Ozs7OztBQVFBLElBQU1DLFFBQVEsR0FBRyxTQUFYQSxRQUFXLENBQVNDLE1BQVQsRUFBaUI7QUFDaEM7QUFDQSxNQUFNQyxRQUFRLEdBQUcsS0FBS0QsTUFBTSxDQUFDRSxNQUFQLENBQWNDLE9BQWQsQ0FBc0IsR0FBdEIsQ0FBTCxHQUFrQyxHQUFsQyxHQUF3QyxHQUF6RCxDQUZnQyxDQUloQzs7QUFDQSxNQUFNQyxHQUFHLEdBQ1BKLE1BQU0sQ0FBQ0UsTUFBUCxHQUNBRCxRQURBLEdBRUEsa0JBRkEsS0FHQTtBQUNDLGtCQUFnQixPQUFPRCxNQUFNLENBQUNLLE1BQTlCLEdBQXVDLFNBQVNMLE1BQU0sQ0FBQ0ssTUFBdkQsR0FBZ0UsRUFKakUsTUFLQTtBQUNDLGtCQUFnQixPQUFPTCxNQUFNLENBQUNNLE1BQTlCLEdBQXVDLGdCQUF2QyxHQUEwRCxFQU4zRCxDQURGO0FBU0EsU0FBT0YsR0FBUDtBQUNELENBZkQ7QUFpQkE7Ozs7Ozs7QUFLQSxJQUFNRyxVQUFVLEdBQUcsU0FBYkEsVUFBYSxHQUFXO0FBQzVCO0FBQ0EsTUFBSSxnQkFBZ0IsT0FBT0MsS0FBM0IsRUFBa0MsT0FGTixDQUk1QjtBQUNBOztBQUNBLE1BQ0UsZ0JBQWdCLE9BQU9aLFFBQVEsQ0FBQyxnQkFBRCxDQUEvQixJQUNBLFFBQVFBLFFBQVEsQ0FBQyxnQkFBRCxDQUZsQixFQUdFO0FBQ0E7QUFDRCxHQVgyQixDQWE1Qjs7O0FBQ0EsTUFDRSxnQkFBZ0IsT0FBT0EsUUFBUSxDQUFDUyxNQUFoQyxJQUNBLGdCQUFnQixPQUFPVCxRQUFRLENBQUNVLE1BRmxDLEVBR0U7QUFDQTtBQUNELEdBbkIyQixDQXFCNUI7OztBQUNBLE1BQU1GLEdBQUcsR0FBR0wsUUFBUSxDQUFDSCxRQUFELENBQXBCLENBdEI0QixDQXdCNUI7QUFDQTtBQUNBOztBQUNBWSxPQUFLLENBQUNKLEdBQUQsQ0FBTCxDQUNHSyxJQURILENBQ1EsVUFBU0MsUUFBVCxFQUFtQjtBQUN2QixXQUFPQSxRQUFRLENBQUNDLElBQVQsRUFBUDtBQUNELEdBSEgsRUFJR0YsSUFKSCxDQUlRLFVBQVNHLElBQVQsRUFBZTtBQUNuQjtBQUNBLFFBQU1DLE1BQU0sR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFFBQXZCLENBQWY7QUFDQUYsVUFBTSxDQUFDRyxJQUFQLEdBQWMscUJBQWQ7QUFDQUgsVUFBTSxDQUFDSSxTQUFQLEdBQW1CTCxJQUFuQjtBQUNBRSxZQUFRLENBQUNJLElBQVQsQ0FBY0MsV0FBZCxDQUEwQk4sTUFBMUI7QUFDRCxHQVZIO0FBV0QsQ0F0Q0Q7O0FBd0NBTixVQUFVLEcsQ0FFVjtBQUNBIiwiZmlsZSI6Ii4vc3JjL1B1YmxpYy9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzLlxuICovXG5pbXBvcnQgXCIuL2FuYWx5dGljc1wiO1xuXG4vLyBTZXQgYSByZWZlcmVuY2UgdG8gdGhlIFdvcmRMaWZ0IHNldHRpbmdzLlxuY29uc3Qgc2V0dGluZ3MgPSB3aW5kb3cud2xTZXR0aW5ncztcblxuLyoqXG4gKiBCdWlsZCB0aGUgcmVxdWVzdCBVUkwsIGluY2x1c2l2ZSBvZiB0aGUgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMuXG4gKlxuICogQHNpbmNlIDMuMTkuMVxuICpcbiAqIEBwYXJhbSBwYXJhbXMge3thcGlVcmwsIHBvc3RJZCwgaXNIb21lfX0gVGhlIHF1ZXJ5IHBhcmFtZXRlcnMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcmVxdWVzdCBVUmwuXG4gKi9cbmNvbnN0IGJ1aWxkVXJsID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gIC8vIEpvaW4gd2l0aCBgP2Agb3IgYCZgLlxuICBjb25zdCBqb2luQ2hhciA9IDAgPD0gcGFyYW1zLmFwaVVybC5pbmRleE9mKFwiP1wiKSA/IFwiJlwiIDogXCI/XCI7XG5cbiAgLy8gQnVpbGQgdGhlIFVSTFxuICBjb25zdCB1cmwgPVxuICAgIHBhcmFtcy5hcGlVcmwgK1xuICAgIGpvaW5DaGFyICtcbiAgICBcImFjdGlvbj13bF9qc29ubGRcIiArXG4gICAgLy8gQXBwZW5kIHRoZSBwb3N0IGlkIHBhcmFtZXRlci5cbiAgICAoXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIHBhcmFtcy5wb3N0SWQgPyBcIiZpZD1cIiArIHBhcmFtcy5wb3N0SWQgOiBcIlwiKSArXG4gICAgLy8gQXBwZW5kIHRoZSBob21lcGFnZSBwYXJhbWV0ZXIuXG4gICAgKFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBwYXJhbXMuaXNIb21lID8gXCImaG9tZXBhZ2U9dHJ1ZVwiIDogXCJcIik7XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cbi8qKlxuICogTG9hZCB0aGUgSlNPTi1MRC5cbiAqXG4gKiBAc2luY2UgMy4wLjBcbiAqL1xuY29uc3QgbG9hZEpzb25MZCA9IGZ1bmN0aW9uKCkge1xuICAvLyBCYWlsIG91dCBpdCB0aGUgY29udGFpbmVyIGRvZXNuJ3Qgbm93IGFib3V0IGZldGNoLlxuICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIGZldGNoKSByZXR1cm47XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIEpTT04tTEQgaXMgZGlzYWJsZWQsIGkuZS4gaWYgdGhlcmUncyBhIGBqc29ubGRfZW5hYmxlZGBcbiAgLy8gc2V0dGluZyBleHBsaWNpdGx5IGRlZmluZWQgd2l0aCBhIHZhbHVlIGRpZmZlcmVudCBmcm9tICcxJy5cbiAgaWYgKFxuICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBzZXR0aW5nc1tcImpzb25sZF9lbmFibGVkXCJdICYmXG4gICAgXCIxXCIgIT09IHNldHRpbmdzW1wianNvbmxkX2VuYWJsZWRcIl1cbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIGEgcG9zdCBpZCBvciBpdCdzIGhvbWVwYWdlLCBvdGhlcndpc2UgZXhpdC5cbiAgaWYgKFxuICAgIFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiBzZXR0aW5ncy5wb3N0SWQgJiZcbiAgICBcInVuZGVmaW5lZFwiID09PSB0eXBlb2Ygc2V0dGluZ3MuaXNIb21lXG4gICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEdldCB0aGUgcmVxdWVzdCBVUkwuXG4gIGNvbnN0IHVybCA9IGJ1aWxkVXJsKHNldHRpbmdzKTtcblxuICAvLyBGaW5hbGx5IGZldGNoIHRoZSBVUkwuXG4gIC8vXG4gIC8vIERPIE5PVCB1c2UgaGVyZSBgbmV3IFVSTCguLi4pYCAvIGBVUkwuc2VhcmNoUGFyYW1zYDogR29vZ2xlIFNEVFQgZG9lc24ndCB1bmRlcnN0YW5kIHRoZW0uXG4gIGZldGNoKHVybClcbiAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIC8vIFVzZSBgZG9jdW1lbnQuY3JlYXRlRWxlbWVudGAuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vaW5zaWRlb3V0MTAvd29yZGxpZnQtcGx1Z2luL2lzc3Vlcy84MTAuXG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgc2NyaXB0LnR5cGUgPSBcImFwcGxpY2F0aW9uL2xkK2pzb25cIjtcbiAgICAgIHNjcmlwdC5pbm5lclRleHQgPSBib2R5O1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH0pO1xufTtcblxubG9hZEpzb25MZCgpO1xuXG4vL1xuLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGxvYWRKc29uTGQpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Public/index.js\n");

/***/ })

/******/ });